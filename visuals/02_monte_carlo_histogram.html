<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte Carlo Simulation: OP Accumulated Distribution</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/histogram-bellcurve.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f5f5f5;
        }
        #chart-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        #chart {
            width: 100%;
            height: 500px;
        }
        .stats-box {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .stat-item {
            text-align: center;
            padding: 10px 20px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #ff0420;
        }
        .stat-label {
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="chart-container">
        <div id="chart"></div>
        <div class="stats-box" id="stats"></div>
    </div>

    <script>
        // Monte Carlo simulation results - total_op_bought from 1000 simulations
        const simResults = [219527.18,218514.59,219148.44,218875.72,219055.82,218955.60,218662.86,218576.55,219101.27,218747.97,218694.04,218752.17,218960.11,219100.94,219206.37,219381.31,218686.83,218737.34,219254.58,218981.43,218437.39,218708.46,218732.66,219345.17,218961.19,218910.94,219183.18,218610.87,218807.02,218757.49,219108.19,218848.62,218615.05,219042.61,218748.95,219204.61,218743.19,218937.46,218687.75,218859.06,219050.24,219034.52,219091.91,219303.93,219118.78,218383.92,219380.02,219226.66,219129.33,219202.24,219181.40,218933.41,219025.28,218778.41,218748.61,218847.67,218954.92,219166.29,218622.08,218960.88,218225.47,219261.25,218327.23,218590.64,219110.92,218898.88,218556.56,218888.70,218552.14,218861.40,218404.49,218505.93,219077.02,219060.43,218792.18,219075.53,218867.65,219220.40,218926.14,218962.22,219414.32,218745.50,218776.95,219247.23,218982.08,218567.13,219175.60,218880.41,218924.34,218813.93,218814.57,218503.76,219006.16,218576.16,218763.51,219192.97,218955.47,219167.32,219297.66,218967.59,218679.53,219090.29,218564.79,219130.92,218729.67,219256.79,219528.33,218906.60,219639.76,218675.30,219130.09,218911.87,219497.82,218766.92,218860.34,218920.04,218934.35,219339.54,218624.33,218740.00,218648.02,218489.50,218587.58,219201.14,218843.32,218961.22,218795.76,218852.61,219501.77,219786.32,218593.76,219036.54,218133.03,219256.93,218539.75,218843.79,219116.10,218533.92,218652.79,219019.90,218936.49,218928.92,219334.86,219113.25,218342.50,219034.78,218545.47,219084.22,218848.24,218819.09,218998.85,219134.29,218846.46,219321.10,219251.48,218965.50,218756.92,219428.74,219240.88,218758.61,218653.49,218730.67,218732.38,218803.17,219015.19,218997.50,219326.66,218712.03,218666.73,218424.35,218991.17,218880.34,218158.10,219331.55,218943.43,218979.26,219107.67,218663.12,218816.61,219025.75,218391.51,219611.49,218979.50,219365.98,218525.26,219158.91,218632.96,218800.95,218847.47,219334.57,218859.66,218857.04,218988.15,218830.70,219359.75,218621.66,219022.38,218789.33,218678.88,219252.11,219189.65,219209.06,218904.03,218638.25,219408.22,219181.52,219001.18,218946.21,218960.25,218779.44,219066.19,218902.33,218727.14,219171.83,218694.71,219253.15,219056.07,218754.58,218856.08,218775.47,218568.88,219258.57,218628.49,218793.10,219024.72,219583.41,218706.44,218949.77,218519.00,219093.64,219047.04,218741.19,218980.95,218532.13,219132.18,218500.50,219528.79,218681.43,218665.02,218328.84,219111.63,218995.29,219063.61,218614.18,218899.31,218961.09,218927.86,218681.39,218605.73,218444.80,219029.45,218841.04,219586.00,218702.05,218403.29,219108.72,219029.37,219492.31,219050.39,219372.92,218872.58,218796.61,218667.96,219080.63,219339.58,219153.05,219214.34,218918.22,218934.86,218914.20,218913.63,218687.11,219306.75,218943.74,218842.49,218739.03,218676.50,219390.69,219025.74,218727.96,218804.68,218765.16,218751.55,218781.76,219159.57,218894.76,218523.48,219219.91,219021.43,218775.49,219267.75,219173.59,218945.17,219330.21,218679.74,219018.59,218466.67,219014.28,218519.96,218927.17,219490.48,218714.87,219313.15,219278.50,219125.13,219088.65,218612.09,218410.35,218651.58,218737.59,218713.60,218784.32,218958.45,218819.14,219260.53,218721.75,219278.26,218892.17,218947.09,219069.49,219197.14,218170.09,218889.75,218815.31,218420.80,219035.71,219024.42,218747.46,218280.62,218596.99,218500.48,219279.71,218801.93,218947.65,219223.87,219180.18,219036.57,218813.50,219069.50,218942.04,218606.21,219292.09,218799.19,219114.29,218516.39,218918.21,218725.72,218309.58,219371.64,219010.53,218722.31,219189.95,218383.59,218882.35,219243.52,218309.84,218468.50,218992.63,218949.32,218630.58,218444.40,219118.61,218951.79,219061.04,219077.25,218824.12,219118.15,218862.61,218900.04,218662.96,219104.21,218870.65,219007.75,218748.78,218677.18,219053.04,219284.54,218799.35,218902.69,218777.99,218958.39,218987.41,218653.67,219086.61,219019.43,218338.83,218751.52,219222.46,218352.81,219254.71,218794.08,219127.94,218883.63,218730.83,218613.85,218954.28,219272.21,219135.56,218574.99,219383.39,218818.47,219561.51,218597.41,219055.55,218260.09,218950.79,219053.20,218389.85,218799.71,218504.39,219343.19,218610.54,219063.27,218646.01,218866.32,219402.43,218945.64,218632.56,218749.78,218950.98,219172.29,219026.96,219356.04,218894.27,219035.91,218921.29,218807.91,218647.83,218970.68,218845.62,218777.67,219590.52,218708.36,218847.19,219058.81,219403.30,219051.36,218669.29,218997.43,219533.67,218937.81,218470.38,218959.23,218657.61,219265.07,218982.23,218269.73,219222.92,218610.47,218835.90,219250.04,218894.59,218778.36,219319.41,218582.50,218758.36,219070.43,219099.28,219240.16,218621.77,219462.78,219205.14,218901.10,219031.39,218530.01,218724.09,218640.47,219445.23,219390.72,219112.21,218844.01,219087.19,218760.28,219152.41,218670.60,218766.13,218906.60,219086.75,218594.27,218985.02,218951.84,218822.41,219262.96,218963.17,219648.30,218633.63,218957.59,218852.04,218674.81,218656.48,218851.78,219234.29,219220.83,219069.25,219129.58,218964.67,219103.35,219018.33,219544.07,218922.18,218845.20,218570.91,219057.16,218495.75,218735.81,219503.61,218796.68,218601.91,218897.88,218815.63,218820.61,219099.17,218922.67,218992.93,218836.51,218647.77,219026.76,218997.38,218633.66,218895.03,218296.99,218832.56,219051.92,218668.13,218673.06,218986.78,219167.75,218632.64,219078.00,218768.69,218538.99,219250.75,218870.89,219084.31,218679.70,219090.71,219420.20,219207.08,218951.58,218917.56,218673.84,218989.63,218721.79,219508.57,218127.86,218834.47,219116.85,218750.83,218719.19,219169.11,218844.87,219249.02,218667.15,218228.54,219244.96,219079.86,218906.39,219247.55,219146.54,218968.76,219561.53,219223.40,218566.43,218397.41,219370.75,218493.49,218573.44,218746.64,219234.80,218613.95,218668.34,219115.53,219017.71,218602.37,218766.01,218317.56,219381.66,219332.38,218924.28,218915.04,218643.88,218684.79,218953.06,218803.20,218984.46,218770.34,218507.84,218742.77,219135.96,218668.59,219370.24,218503.93,218370.52,219068.98,218817.77,219355.08,219251.37,219309.07,219596.54,218612.34,219100.91,219381.63,218459.67,218960.17,218929.11,219244.96,218795.19,219100.26,218741.85,219006.96,219428.96,219064.38,219004.76,219122.69,219282.49,218672.34,219037.85,218705.22,218803.99,218692.32,219294.41,218586.02,218790.12,219335.09,218680.14,219249.76,219101.31,219097.74,219076.36,219018.45,218697.99,219025.06,218899.75,218556.68,219265.79,219574.39,218794.52,219145.95,218925.62,219127.65,219056.95,219077.03,219244.57,218933.17,218956.37,219269.38,219033.76,219413.50,218756.06,219105.46,218724.89,218496.23,219035.89,218481.93,218832.67,218703.86,219221.47,219173.89,219042.25,219130.30,219404.45,218500.94,219051.70,218742.24,218880.65,218402.41,218906.74,218762.33,218897.29,218848.33,218982.07,218522.98,218487.78,218612.96,218876.21,218875.93,219340.43,218453.30,218944.20,218562.10,219225.06,218566.23,219007.32,218999.88,218855.40,218828.88,218462.49,219034.80,219278.80,219238.20,218869.96,219169.21,219044.76,219211.18,219421.28,219180.12,218629.85,219023.86,218714.10,218947.11,218617.48,218700.91,218850.70,218895.30,218845.15,219103.58,219243.05,219347.03,219398.23,218833.58,218971.42,218865.74,219049.95,219167.12,218714.60,218497.65,219243.31,218748.01,219179.50,218944.02,218807.34,218734.58,218916.45,218494.78,219172.95,218328.73,218910.09,219193.11,218910.45,218493.30,218482.45,218487.75,219022.74,219322.60,218606.02,218944.66,219172.53,218728.93,218617.59,218836.07,219205.39,218678.36,219063.88,219427.04,218624.88,218836.98,219028.67,219018.26,218756.42,218871.67,219019.09,219434.25,218864.13,218979.06,218947.26,218842.11,219301.29,219362.16,218807.35,218623.17,219115.58,218574.74,219190.03,218981.00,218810.95,218782.65,218675.08,219083.61,218739.91,219115.72,219084.24,219213.31,218711.68,218477.29,219077.48,219013.46,218578.19,218828.50,218763.44,218796.98,219147.09,219233.20,218404.12,218874.92,218537.94,218959.12,218686.02,219203.37,218861.92,219151.20,218453.68,218659.18,218939.68,218681.10,218804.89,219396.45,218951.64,219174.44,218811.59,218920.29,218927.39,219151.55,218611.07,218801.14,218920.53,219201.08,219205.54,218866.49,218620.28,218678.84,219317.50,218921.01,218787.27,218656.56,218970.67,219319.08,218896.81,219073.43,218711.19,218768.53,219239.94,218736.06,218808.53,219180.38,219313.12,218759.36,218201.48,218692.53,218762.85,218838.55,219227.79,219239.46,218968.54,219247.24,219015.04,219412.63,219217.95,218764.38,218795.86,219112.38,218886.09,219324.86,219024.40,218691.06,218863.24,219095.84,218974.27,218749.47,218444.44,219102.32,218581.73,219071.00,219061.02,218846.47,219651.85,218700.34,218584.88,218443.19,218705.98,218626.16,219336.74,219168.22,218758.19,218976.84,219318.06,218854.46,218872.94,218724.32,218772.99,218655.34,218971.71,218715.57,219022.14,218495.64,219199.23,219030.31,219610.84,218773.48,218738.43,219010.29,219279.04,219486.95,219019.14,218334.80,219058.96,218915.29,218728.17,218685.07,218632.82,218958.04,219338.24,219162.18,218570.31,219111.21,218888.34,218854.69,218807.49,218342.21,218847.90,219147.27,218947.93,218818.84,219183.46,219364.46,218964.73,218240.95,218872.81,219045.58,219129.46,219231.20,218872.34,219483.31,219011.51,218452.62,218928.12,219383.62,219135.00,218932.51,219611.54,218566.94,218711.32,219381.63,219175.32,219173.92,218785.67,219378.37,219214.93,218741.50,219192.84,218899.78,219453.35,218793.35,218644.27,219110.87,218707.53,219091.70,219606.28,219031.30,218762.08,219174.37,218599.02,218867.26,219001.91,219114.86,218776.57,219048.12,218702.89,219056.49,218693.38,219212.80,218542.74,219055.96,218478.57,218724.54,219135.29,218880.73,218735.75,219178.89,218906.12,219039.24,218903.20,218892.09,218929.62,219004.62,218632.01,219325.10,219090.56,218683.63,218695.42,218937.05,218104.63,219000.86,218834.44,218820.30,218539.52,218727.27,218753.36,218895.02,218950.92,218767.57,218673.40,218902.91,218968.94,219023.10,219058.11,218686.24,218607.30,218632.05,218799.03,218893.47,219241.63,219105.48,219158.98,218815.82,219510.08,219182.05,219112.55,218779.08,218954.64,219011.43];

        // Calculate statistics
        const n = simResults.length;
        const mean = simResults.reduce((a, b) => a + b, 0) / n;
        const sorted = [...simResults].sort((a, b) => a - b);
        const median = sorted[Math.floor(n / 2)];
        const min = sorted[0];
        const max = sorted[n - 1];
        const variance = simResults.reduce((sum, x) => sum + Math.pow(x - mean, 2), 0) / n;
        const stdDev = Math.sqrt(variance);

        // Display stats
        document.getElementById('stats').innerHTML = `
            <div class="stat-item"><div class="stat-value">${mean.toLocaleString(undefined, {maximumFractionDigits: 0})}</div><div class="stat-label">Mean OP</div></div>
            <div class="stat-item"><div class="stat-value">${median.toLocaleString(undefined, {maximumFractionDigits: 0})}</div><div class="stat-label">Median OP</div></div>
            <div class="stat-item"><div class="stat-value">${stdDev.toLocaleString(undefined, {maximumFractionDigits: 0})}</div><div class="stat-label">Std Dev</div></div>
            <div class="stat-item"><div class="stat-value">${min.toLocaleString(undefined, {maximumFractionDigits: 0})}</div><div class="stat-label">Min OP</div></div>
            <div class="stat-item"><div class="stat-value">${max.toLocaleString(undefined, {maximumFractionDigits: 0})}</div><div class="stat-label">Max OP</div></div>
        `;

        Highcharts.chart('chart', {
            chart: {
                type: 'histogram',
                zoomType: 'x',
                backgroundColor: '#ffffff'
            },
            title: {
                text: 'Monte Carlo Simulation: OP Accumulated Distribution',
                style: { fontSize: '24px', fontWeight: 'bold', color: '#333333' }
            },
            subtitle: {
                text: '1,000 simulations of random daily purchases using T-1 transaction fees',
                style: { fontSize: '16px', color: '#666666' }
            },
            xAxis: [{
                title: { text: 'Total OP Accumulated', style: { fontSize: '1.125rem' } },
                labels: {
                    style: { fontSize: '1rem' },
                    formatter: function() { return (this.value / 1000).toFixed(0) + 'K'; }
                },
                alignTicks: false
            }, {
                title: { text: '' },
                opposite: true,
                visible: false
            }],
            yAxis: [{
                title: { text: 'Frequency (# Simulations)', style: { fontSize: '1.125rem', fontWeight: 'bold' } },
                labels: { style: { fontSize: '1rem' } }
            }, {
                title: { text: '' },
                opposite: true,
                visible: false
            }],
            legend: { enabled: false },
            tooltip: {
                headerFormat: '',
                pointFormat: '<b>{point.x:.0f} - {point.x2:.0f} OP</b><br/>Simulations: <b>{point.y}</b>'
            },
            plotOptions: {
                histogram: {
                    binsNumber: 30,
                    color: '#ff0420',
                    borderWidth: 1,
                    borderColor: '#cc0318'
                }
            },
            series: [{
                name: 'Histogram',
                type: 'histogram',
                xAxis: 1,
                yAxis: 1,
                baseSeries: 's1',
                zIndex: -1
            }, {
                name: 'Data',
                type: 'scatter',
                id: 's1',
                data: simResults,
                visible: false,
                showInLegend: false
            }],
            credits: {
                enabled: true,
                text: 'Data: Simulation Results',
                style: { fontSize: '12px' }
            }
        });
    </script>
</body>
</html>
